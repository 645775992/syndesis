var t=require("@syndesis/ui"),e=require("react"),n=require("react-router-dom"),r=require("@syndesis/api"),o=require("@syndesis/utils"),i=require("react-router"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function l(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return l(o,r),o.prototype.render=function(){return e.createElement(e.Fragment,null,e.createElement(t.ListViewToolbar,u({},this.props),e.createElement("div",{className:"form-group"},e.createElement(n.Link,{to:this.props.match+"/import",className:"btn btn-default"},"Import"),e.createElement(n.Link,{to:this.props.match+"/new",className:"btn btn-primary"},"Create Integration"))),e.createElement("div",{className:"container-fluid"},this.props.loading?e.createElement(t.IntegrationsListSkeleton,{width:800,style:{backgroundColor:"#FFF",marginTop:30}}):e.createElement(t.IntegrationsList,null,this.props.monitoredIntegrations.map(function(n,r){return e.createElement(t.IntegrationsListItem,{integrationId:n.integration.id,integrationName:n.integration.name,currentState:n.integration.currentState,targetState:n.integration.targetState,isConfigurationRequired:!!(n.integration.board.warnings||n.integration.board.errors||n.integration.board.notices),monitoringValue:n.monitoring&&n.monitoring.detailedState.value,monitoringCurrentStep:n.monitoring&&n.monitoring.detailedState.currentStep,monitoringTotalSteps:n.monitoring&&n.monitoring.detailedState.totalSteps,key:r})}))))},o}(e.Component);var s={filterType:"text",id:"name",placeholder:"Filter by Name",title:"Name"},p={filterType:"select",filterValues:[],id:"connection",placeholder:"Filter by Connection",title:"Connection"};var m={id:"name",isNumeric:!1,title:"Name"},d=[m,{id:"status",isNumeric:!1,title:"Status"}],g=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={activeFilters:[],currentFilterType:s,currentSortType:m.title,currentValue:"",filterCategory:null,isSortAscending:!0},e}return l(n,t),n.prototype.render=function(){var t=this;return e.createElement(r.WithMonitoredIntegrations,null,function(n){var o=n.data,i=n.loading,a=n.hasData;return e.createElement(r.WithConnections,null,function(n){var r,l=n.data,m=function(t,e,n,r){var o=t;return e.forEach(function(t){var e=t.value.toLowerCase();o=o.filter(function(n){return"Name"===t.title?n.integration.name.toLowerCase().includes(e):"Connection"===t.title&&n.integration.flows.reduce(function(t,e){return t.concat(e.steps.filter(function(t){return t.connection}).map(function(t){return t.connection.name.toLowerCase()}))},[]).reduce(function(t,n){return t||n.includes(e)},!1)})}),o=o.sort(function(t,e){var o=r?t:e,i=r?e:t;return"Name"===n?o.integration.name.localeCompare(i.integration.name):o.integration.currentState.localeCompare(i.integration.currentState)})}(o.items,t.state.activeFilters,t.state.currentSortType,t.state.isSortAscending);return e.createElement(c,u({loading:!a&&i,match:"TODO",monitoredIntegrations:m,filterTypes:(r=l.items,[s,u({},p,{filterValues:r.map(function(t){return{id:t.id,title:t.name}})})]),sortTypes:d,resultsCount:m.length},t.state,{onUpdateCurrentValue:t.onUpdateCurrentValue,onValueKeyPress:t.onValueKeyPress,onFilterAdded:t.onFilterAdded,onSelectFilterType:t.onSelectFilterType,onFilterValueSelected:t.onFilterValueSelected,onRemoveFilter:t.onRemoveFilter,onClearFilters:t.onClearFilters,onToggleCurrentSortDirection:t.onToggleCurrentSortDirection,onUpdateCurrentSortType:t.onUpdateCurrentSortType}))})})},n}(o.ListViewToolbarAbstractComponent),f=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return l(n,t),n.prototype.render=function(){return e.createElement(i.Switch,null,e.createElement(i.Route,{path:this.props.mountpoint,exact:!0,component:g}))},n}(e.Component);module.exports=f;
//# sourceMappingURL=integrations.js.map
