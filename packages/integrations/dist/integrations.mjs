import{IntegrationsList as t,IntegrationsListItem as e,IntegrationsListSkeleton as n,ListViewToolbar as r}from"@syndesis/ui";import{createElement as o,Component as i,Fragment as a}from"react";import{Link as u}from"react-router-dom";import{WithConnections as l,WithMonitoredIntegrations as s}from"@syndesis/api";import{ListViewToolbarAbstractComponent as c}from"@syndesis/utils";import{Route as p,Switch as m}from"react-router";var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function f(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},y=function(i){function l(){return null!==i&&i.apply(this,arguments)||this}return f(l,i),l.prototype.render=function(){return o(a,null,o(r,g({},this.props),o("div",{className:"form-group"},o(u,{to:this.props.match+"/import",className:"btn btn-default"},"Import"),o(u,{to:this.props.match+"/new",className:"btn btn-primary"},"Create Integration"))),o("div",{className:"container-fluid"},this.props.loading?o(n,{width:800,style:{backgroundColor:"#FFF",marginTop:30}}):o(t,null,this.props.monitoredIntegrations.map(function(t,n){return o(e,{integrationId:t.integration.id,integrationName:t.integration.name,currentState:t.integration.currentState,targetState:t.integration.targetState,isConfigurationRequired:!!(t.integration.board.warnings||t.integration.board.errors||t.integration.board.notices),monitoringValue:t.monitoring&&t.monitoring.detailedState.value,monitoringCurrentStep:t.monitoring&&t.monitoring.detailedState.currentStep,monitoringTotalSteps:t.monitoring&&t.monitoring.detailedState.totalSteps,key:n})}))))},l}(i);var h={filterType:"text",id:"name",placeholder:"Filter by Name",title:"Name"},S={filterType:"select",filterValues:[],id:"connection",placeholder:"Filter by Connection",title:"Connection"};var v={id:"name",isNumeric:!1,title:"Name"},C=[v,{id:"status",isNumeric:!1,title:"Status"}],F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={activeFilters:[],currentFilterType:h,currentSortType:v.title,currentValue:"",filterCategory:null,isSortAscending:!0},e}return f(e,t),e.prototype.render=function(){var t=this;return o(s,null,function(e){var n=e.data,r=e.loading,i=e.hasData;return o(l,null,function(e){var a,u=e.data,l=function(t,e,n,r){var o=t;return e.forEach(function(t){var e=t.value.toLowerCase();o=o.filter(function(n){return"Name"===t.title?n.integration.name.toLowerCase().includes(e):"Connection"===t.title&&n.integration.flows.reduce(function(t,e){return t.concat(e.steps.filter(function(t){return t.connection}).map(function(t){return t.connection.name.toLowerCase()}))},[]).reduce(function(t,n){return t||n.includes(e)},!1)})}),o=o.sort(function(t,e){var o=r?t:e,i=r?e:t;return"Name"===n?o.integration.name.localeCompare(i.integration.name):o.integration.currentState.localeCompare(i.integration.currentState)})}(n.items,t.state.activeFilters,t.state.currentSortType,t.state.isSortAscending);return o(y,g({loading:!i&&r,match:"TODO",monitoredIntegrations:l,filterTypes:(a=u.items,[h,g({},S,{filterValues:a.map(function(t){return{id:t.id,title:t.name}})})]),sortTypes:C,resultsCount:l.length},t.state,{onUpdateCurrentValue:t.onUpdateCurrentValue,onValueKeyPress:t.onValueKeyPress,onFilterAdded:t.onFilterAdded,onSelectFilterType:t.onSelectFilterType,onFilterValueSelected:t.onFilterValueSelected,onRemoveFilter:t.onRemoveFilter,onClearFilters:t.onClearFilters,onToggleCurrentSortDirection:t.onToggleCurrentSortDirection,onUpdateCurrentSortType:t.onUpdateCurrentSortType}))})})},e}(c);export default(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.render=function(){return o(m,null,o(p,{path:this.props.mountpoint,exact:!0,component:F}))},e}(i));
//# sourceMappingURL=integrations.mjs.map
