!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("patternfly-react"),require("react"),require("react-content-loader"),require("@syndesis/utils"),require("react-router-dom"),require("@syndesis/api"),require("react-router")):"function"==typeof define&&define.amd?define(["patternfly-react","react","react-content-loader","@syndesis/utils","react-router-dom","@syndesis/api","react-router"],t):e.dashboard=t(e.patternflyReact,e.react,e.m,e.utils,e.reactRouterDom,e.api,e.reactRouter)}(this,function(e,t,r,n,i,a,o){r=r&&r.hasOwnProperty("default")?r.default:r;var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function u(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var m=function(){return(m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){return t.createElement(e.Card,{accented:!0,aggregated:!0,matchHeight:!0},t.createElement(e.Card.Title,null,t.createElement(e.AggregateStatusCount,null,t.createElement("span",{"data-test-aggregate-title":!0},this.props.title))),t.createElement(e.Card.Body,null,t.createElement(e.AggregateStatusNotifications,null,t.createElement(e.AggregateStatusNotification,null,t.createElement(e.Icon,{type:"pf",name:"ok"}),t.createElement("span",{"data-test-aggregate-ok-count":!0},this.props.ok)," "),t.createElement(e.AggregateStatusNotification,null,t.createElement(e.Icon,{type:"pf",name:"error-circle-o"}),t.createElement("span",{"data-test-aggregate-error-count":!0},this.props.error)))))},n}(t.PureComponent),h=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){return t.createElement(e.Card,{matchHeight:!0},t.createElement(e.Card.Body,null,t.createElement(e.EmptyState,null,t.createElement("div",{className:"blank-slate-pf-icon"},t.createElement("img",{src:this.props.icon,alt:this.props.name,width:46})),t.createElement(e.EmptyState.Title,null,this.props.name),t.createElement(e.EmptyState.Info,null,this.props.description))))},n}(t.PureComponent),g=function(n){return t.createElement(e.Card,{matchHeight:!0},t.createElement(e.Card.Body,null,t.createElement(e.EmptyState,null,t.createElement(r,m({height:300,width:200,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},n),t.createElement("circle",{cx:"100",cy:"50",r:"40"}),t.createElement("rect",{x:"5",y:"125",rx:"5",ry:"5",width:"190",height:"30"}),t.createElement("rect",{x:"25",y:"180",rx:"5",ry:"5",width:"150",height:"15"}),t.createElement("rect",{x:"40",y:"205",rx:"5",ry:"5",width:"120",height:"15"})))))},E=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){return t.createElement(e.CardGrid,{fluid:!0,matchHeight:!0},t.createElement(e.CardGrid.Row,null,this.props.loading?new Array(5).fill(0).map(function(r,n){return t.createElement(e.CardGrid.Col,{sm:6,md:3,key:n},t.createElement(g,{key:n}))}):this.props.children.map(function(r,n){return t.createElement(e.CardGrid.Col,{sm:6,md:3,key:n},r)})))},n}(t.Component),y=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){return t.createElement("div",null,t.createElement("div",null,this.props.value," ( ",this.props.currentStep," /"," ",this.props.totalSteps," )"),t.createElement(e.ProgressBar,{now:this.props.currentStep,max:this.props.totalSteps,style:{height:6}}))},n}(t.PureComponent),f=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){return t.createElement(e.ListView,null,this.props.children)},n}(t.Component),C=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){var r="Published"===this.props.currentState||"Pending"===this.props.currentState?"primary":"default",n="Pending";switch(this.props.currentState){case"Published":n="Published";break;case"Unpublished":n="Unpublished"}return t.createElement(e.Label,{type:r},n)},n}(t.Component),x=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){var r="Pending";switch(this.props.targetState){case"Published":r="Starting...";break;case"Unpublished":r="Stopping..."}return t.createElement("div",{className:"integration-status-detail"},this.props.value&&this.props.currentStep&&this.props.totalSteps?t.createElement(y,{currentStep:this.props.currentStep,totalSteps:this.props.totalSteps,value:this.props.value}):t.createElement(t.Fragment,null,t.createElement(e.Spinner,{loading:!0,inline:!0}),r))},n}(t.Component),w=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return u(n,r),n.prototype.render=function(){return t.createElement(e.ListView.Item,{actions:t.createElement("div",null,"Pending"===this.props.currentState?t.createElement(x,{targetState:this.props.targetState,value:this.props.monitoringValue,currentStep:this.props.monitoringCurrentStep,totalSteps:this.props.monitoringTotalSteps}):t.createElement(C,{currentState:this.props.currentState}),t.createElement(e.DropdownKebab,{id:"integration-"+this.props.integrationId+"-action-menu",pullRight:!0},t.createElement(e.MenuItem,null,"Action 2"))),heading:this.props.integrationName,description:this.props.isConfigurationRequired?t.createElement(t.Fragment,null,t.createElement(e.Icon,{type:"pf",name:"warning-triangle-o"}),"Configuration Required"):"",hideCloseIcon:!0,leftContent:t.createElement(e.ListView.Icon,{name:"gear"}),stacked:!1})},n}(t.Component),S=function(e){var n=e.width;return t.createElement(r,{height:356,width:n,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb",style:e.style},t.createElement("circle",{cx:"30",cy:"40",r:"16"}),t.createElement("circle",{cx:"70",cy:"40",r:"16"}),t.createElement("rect",{x:"105",y:"35",rx:"5",ry:"5",width:"200",height:"15"}),t.createElement("rect",{x:n-100,y:"35",rx:"5",ry:"5",width:"80",height:"15"}),t.createElement("circle",{cx:"30",cy:"110",r:"16"}),t.createElement("circle",{cx:"70",cy:"110",r:"16"}),t.createElement("rect",{x:"105",y:"105",rx:"5",ry:"5",width:"180",height:"15"}),t.createElement("rect",{x:n-100,y:"105",rx:"5",ry:"5",width:"80",height:"15"}),t.createElement("circle",{cx:"30",cy:"180",r:"16"}),t.createElement("circle",{cx:"70",cy:"180",r:"16"}),t.createElement("rect",{x:"105",y:"175",rx:"5",ry:"5",width:"195",height:"15"}),t.createElement("rect",{x:n-100,y:"175",rx:"5",ry:"5",width:"85",height:"15"}),t.createElement("circle",{cx:"30",cy:"250",r:"16"}),t.createElement("circle",{cx:"70",cy:"250",r:"16"}),t.createElement("rect",{x:"105",y:"245",rx:"5",ry:"5",width:"225",height:"15"}),t.createElement("rect",{x:n-100,y:"245",rx:"5",ry:"5",width:"85",height:"15"}),t.createElement("circle",{cx:"30",cy:"320",r:"16"}),t.createElement("circle",{cx:"70",cy:"320",r:"16"}),t.createElement("rect",{x:"105",y:"315",rx:"5",ry:"5",width:"165",height:"15"}),t.createElement("rect",{x:n-100,y:"315",rx:"5",ry:"5",width:"85",height:"15"}))},b=function(){return t.createElement(e.EmptyState,null,t.createElement(e.EmptyState.Icon,null),t.createElement(e.EmptyState.Title,null,"Something is wrong"),t.createElement(e.EmptyState.Info,null,"An error occurred while talking with the server."),t.createElement(e.EmptyState.Help,null,"Please check your internet connection."),t.createElement(e.EmptyState.Action,null,t.createElement("a",{href:".",className:"btn btn-lg btn-primary"},"Refresh")))},I=(function(r){function n(){return null!==r&&r.apply(this,arguments)||this}u(n,r),n.prototype.render=function(){return this.props.error||this.props.timedOut?t.createElement(b,null):this.props.pastDelay?t.createElement("div",{className:"ModuleLoader"},t.createElement(e.Spinner,{loading:!0,size:"lg"})):null}}(t.Component),function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return l(n,r),n.prototype.render=function(){return t.createElement(e.Card,{accented:!0,aggregated:!0,matchHeight:!0},t.createElement(e.Card.Title,null,t.createElement(e.AggregateStatusCount,null,this.props.count)," ","Connections"))},n}(t.PureComponent)),v=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return l(n,r),n.prototype.render=function(){var r={colors:{Pending:e.patternfly.pfPaletteColors.black200,Published:e.patternfly.pfPaletteColors.blue400,Stopped:e.patternfly.pfPaletteColors.black300},columns:[["Running",this.props.runningIntegrations],["Stopped",this.props.stoppedIntegrations],["Pending",this.props.pendingIntegrations]],type:"donut"};return t.createElement(e.Card,null,t.createElement(e.Card.Heading,null,t.createElement(e.Card.Title,null,"Integration Board")),t.createElement(e.Card.Body,null,t.createElement(e.DonutChart,{id:"integration-board",size:{height:120},data:r,tooltip:{contents:e.patternfly.pfDonutTooltipContents,show:!0},title:{type:"total",secondary:"Integrations"},legend:{show:!0,position:"right"}})))},n}(t.PureComponent),P=function(e){return t.createElement(r,s({height:150,width:350,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},e),t.createElement("rect",{x:"20",y:"5",rx:"5",ry:"5",width:"100",height:"10"}),t.createElement("rect",{x:"150",y:"5",rx:"5",ry:"5",width:"30",height:"10"}),t.createElement("rect",{x:"250",y:"5",rx:"5",ry:"5",width:"40",height:"10"}),t.createElement("rect",{x:"20",y:"35",rx:"5",ry:"5",width:"80",height:"10"}),t.createElement("rect",{x:"150",y:"35",rx:"5",ry:"5",width:"30",height:"10"}),t.createElement("rect",{x:"250",y:"35",rx:"5",ry:"5",width:"40",height:"10"}),t.createElement("rect",{x:"20",y:"65",rx:"5",ry:"5",width:"95",height:"10"}),t.createElement("rect",{x:"150",y:"65",rx:"5",ry:"5",width:"30",height:"10"}),t.createElement("rect",{x:"250",y:"65",rx:"5",ry:"5",width:"40",height:"10"}),t.createElement("rect",{x:"20",y:"95",rx:"5",ry:"5",width:"125",height:"10"}),t.createElement("rect",{x:"150",y:"95",rx:"5",ry:"5",width:"30",height:"10"}),t.createElement("rect",{x:"250",y:"95",rx:"5",ry:"5",width:"40",height:"10"}),t.createElement("rect",{x:"20",y:"125",rx:"5",ry:"5",width:"65",height:"10"}),t.createElement("rect",{x:"150",y:"125",rx:"5",ry:"5",width:"30",height:"10"}),t.createElement("rect",{x:"250",y:"125",rx:"5",ry:"5",width:"40",height:"10"}))},G=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return l(n,r),n.prototype.render=function(){return t.createElement(e.Card,{accented:!1},t.createElement(e.Card.Heading,null,t.createElement(e.Card.Title,null,"Recent Updates")),t.createElement(e.Card.Body,null,this.props.loading?t.createElement(P,null):t.createElement(e.Grid,{fluid:!0},this.props.recentlyUpdatedIntegrations.map(function(r){return t.createElement(e.Grid.Row,{key:r.id},t.createElement(e.Grid.Col,{sm:5},r.name),t.createElement(e.Grid.Col,{sm:3},t.createElement(C,{currentState:r.currentState})),t.createElement(e.Grid.Col,{sm:4},new Date(r.updatedAt||r.createdAt).toLocaleString()))}))))},n}(t.Component),_=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return l(n,r),n.prototype.render=function(){return t.createElement(e.Card,{accented:!1,className:"TopIntegrations"},t.createElement(e.Card.Heading,null,t.createElement(e.Card.DropdownButton,{id:"cardDropdownButton1",title:"Last 30 Days"},t.createElement(e.MenuItem,{eventKey:"1",active:!0},"Last 30 Days"),t.createElement(e.MenuItem,{eventKey:"2"},"Last 60 Days"),t.createElement(e.MenuItem,{eventKey:"3"},"Last 90 Days")),t.createElement(e.Card.Title,null,"Top 5 Integrations")),t.createElement(e.Card.Body,null,this.props.loading?t.createElement(S,{width:500}):t.createElement(f,null,this.props.topIntegrations.map(function(e,r){return t.createElement(w,{integrationId:e.integration.id,integrationName:e.integration.name,currentState:e.integration.currentState,targetState:e.integration.targetState,isConfigurationRequired:!!(e.integration.board.warnings||e.integration.board.errors||e.integration.board.notices),monitoringValue:e.monitoring&&e.monitoring.detailedState.value,monitoringCurrentStep:e.monitoring&&e.monitoring.detailedState.currentStep,monitoringTotalSteps:e.monitoring&&e.monitoring.detailedState.totalSteps,key:r})}))))},n}(t.Component),k=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return l(n,r),n.prototype.render=function(){var r=new Date(this.props.start).toLocaleString();return t.createElement(e.Card,{accented:!0,aggregated:!0,matchHeight:!0},t.createElement(e.Card.Title,{className:"text-left"},t.createElement("small",{className:"pull-right"},"since ",r),t.createElement("div",null,"Uptime")),t.createElement(e.Card.Body,null,"TODO"))},n}(t.PureComponent),D=function(r){function a(){return null!==r&&r.apply(this,arguments)||this}return l(a,r),a.prototype.render=function(){return t.createElement("div",{className:"container-fluid"},t.createElement(e.Grid,{fluid:!0},t.createElement(e.Grid.Row,null,t.createElement(e.Grid.Col,{sm:12},t.createElement("div",{className:"Dashboard-header"},t.createElement("h1",{className:"Dashboard-header__title"},"System metric"),t.createElement("div",{className:"Dashboard-header__actions"},t.createElement(i.Link,{to:"/integrations"},"View All Integrations"),t.createElement(i.Link,{to:"/integrations/new",className:"btn btn-primary"},"Create Integration")))))),t.createElement(e.CardGrid,{fluid:!0,matchHeight:!0},t.createElement(e.CardGrid.Row,null,t.createElement(e.CardGrid.Col,{sm:6,md:3},t.createElement(d,{title:this.props.integrationsCount+" Integrations",ok:this.props.integrationsCount-this.props.integrationsErrorCount,error:this.props.integrationsErrorCount})),t.createElement(e.CardGrid.Col,{sm:6,md:3},t.createElement(I,{count:this.props.connectionsCount})),t.createElement(e.CardGrid.Col,{sm:6,md:3},t.createElement(d,{title:this.props.metrics.messages+" Total Messages",ok:this.props.metrics.messages-this.props.metrics.errors,error:this.props.metrics.errors})),t.createElement(e.CardGrid.Col,{sm:6,md:3},t.createElement(k,{start:this.props.metrics.start})))),t.createElement(e.Grid,{fluid:!0},t.createElement(e.Grid.Row,null,t.createElement(e.Grid.Col,{sm:12,md:6},t.createElement(_,{loading:!this.props.integrationsLoaded,topIntegrations:this.props.topIntegrations})),t.createElement(e.Grid.Col,{sm:12,md:6},t.createElement(e.Grid.Row,null,t.createElement(e.Grid.Col,{sm:12},t.createElement(v,{runningIntegrations:this.props.runningIntegrations,pendingIntegrations:this.props.pendingIntegrations,stoppedIntegrations:this.props.stoppedIntegrations}))),t.createElement(e.Grid.Row,null,t.createElement(e.Grid.Col,{sm:12},t.createElement(G,{loading:!this.props.integrationsLoaded,recentlyUpdatedIntegrations:this.props.recentlyUpdatedIntegrations})))))),t.createElement(e.Grid,{fluid:!0,style:{marginTop:"20px"}},t.createElement(e.Grid.Row,null,t.createElement(e.Grid.Col,{sm:12},t.createElement("div",{className:"Dashboard-header"},t.createElement("h1",{className:"Dashboard-header__title"},"Connections"),t.createElement("div",{className:"Dashboard-header__actions"},t.createElement(i.Link,{to:"/connections"},"View All Connections"),t.createElement(i.Link,{to:"/connections/new",className:"btn btn-primary"},"Create Connection")))))),t.createElement(E,{loading:!this.props.connectionsLoaded},this.props.connections.map(function(e,r){return t.createElement(h,{name:e.name,description:e.description||"",icon:n.getConnectionIcon(e,process.env.PUBLIC_URL),key:r})})))},a}(t.Component);function L(e){return 0!==e.updatedAt?e.updatedAt:e.createdAt}function N(e,t){var r=L(e);return L(t)-r}function R(){return t.createElement(a.WithMonitoredIntegrations,null,function(e){var r=e.data,n=e.hasData;return t.createElement(a.WithIntegrationsMetrics,null,function(e){var i=e.data,o=e.hasData;return t.createElement(a.WithConnections,null,function(e){var a=e.data,c=e.hasData,l=r.items.reduce(function(e,t){var r;return s({},e,((r={})[t.integration.currentState]=(e[t.integration.currentState]||0)+1,r))},{Error:0,Pending:0,Published:0,Unpublished:0});return t.createElement(D,{integrationsLoaded:n,connectionsLoaded:c,metricsLoaded:o,integrationsCount:r.totalCount,integrationsErrorCount:l.Error,connections:a.items,connectionsCount:a.totalCount,metrics:i,runningIntegrations:l.Published,stoppedIntegrations:l.Unpublished,pendingIntegrations:l.Pending,recentlyUpdatedIntegrations:function(e){return e.map(function(e){return e.integration}).sort(N).slice(0,5)}(r.items),topIntegrations:function(e,t){void 0===t&&(t={});var r=Object.keys(t).map(function(e){return{count:t[e],id:e}}).sort(function(e,t){return t.count-e.count});return e.sort(function(e,t){return N(e.integration,t.integration)}).sort(function(e,t){var n=r.findIndex(function(e){return e.id===t.integration.id});return-1===n?r.length+1:n}).reverse().slice(0,5)}(r.items,i.topIntegrations)})})})})}return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.render=function(){return t.createElement(o.Switch,null,t.createElement(o.Route,{path:this.props.mountpoint,exact:!0,component:R}))},r}(t.Component)});
//# sourceMappingURL=dashboard.umd.js.map
